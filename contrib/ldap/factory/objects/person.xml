<?xml version="1.0" encoding="UTF-8"?>
<Objects xmlns="http://www.gonicus.de/Objects">
	<Object>
		<Name>Person</Name>
		<Description>Person class</Description>
		<DefaultBackend>LDAP</DefaultBackend>
		<BaseRDN>ou=people</BaseRDN>

		<Functions>
			<Function>
				<Name>notify</Name>
				<Signature>
					<Parameter>
						<Name>title</Name>
						<Type>String</Type>
						<Required>true</Required>
					</Parameter>
					<Parameter>
						<Name>message</Name>
						<Type>String</Type>
						<Required>true</Required>
					</Parameter>
				</Signature>
				<Code>
					notify(message, title)
					print 'Geht'
		</Code>
			</Function>
		</Functions>

		<Attributes>
			<Attribute>
				<Name>cn</Name>
				<Description>Common name</Description>
				<Backend>LDAP</Backend>
				<Syntax>String</Syntax>
				<Validators>
					<Validator></Validator>
				</Validators>
				<InFilter>
					<Backend>LDAP2</Backend>
					<FilterChain>
						<Filter name="loadAttr" />
					</FilterChain>
				</InFilter>
				<OutFilters>
					<OutFilter>
						<Backend>LDAP2</Backend>
						<FilterChain>
							<Switch>
								<Case name="regexMatch">
									<Param>{%gender}</Param>
									<Param>^M$</Param>

									<FilterChain>
										<Filter name="concatStringLeft">
											<Param>Herr </Param>
										</Filter>
									</FilterChain>

								</Case>
								<Case name="regexMatch">
									<Param>{%gender}</Param>
									<Param>^F$</Param>

									<FilterChain>
										<Filter name="concatString">
											<Param>Frau </Param>
											<Param>{%cn}</Param>
										</Filter>
									</FilterChain>

								</Case>
								<Else>
									<FilterChain>
										<Filter name="discard" />
									</FilterChain>
								</Else>
							</Switch>
						</FilterChain>
					</OutFilter>
				</OutFilters>
				<MultiValue>false</MultiValue>
			</Attribute>

			<Attribute>
				<Name>userPassword</Name>
				<Description>The users password</Description>
				<Backend>LDAP</Backend>
				<Syntax>String</Syntax>
				<InFilter>
					<Backend>LDAP2</Backend>
					<FilterChain>
						<Filter name="loadAttr" />
					</FilterChain>
				</InFilter>
				<OutFilters>
					<Filter>
						<Backend>LDAP2</Backend>
						<FilterChain>
							<Filter name="rename">
								<Param>sambaLMPassword</Param>
							</Filter>
							<Filter name="gen_smb_lm" />
						</FilterChain>
						<FilterChain>
							<Filter name="gen_unix_passwd" />
						</FilterChain>
					</Filter>
				</OutFilters>
				<MultiValue>false</MultiValue>
			</Attribute>
		</Attributes>

		<Container>
			<Type>Nothing</Type>
		</Container>

		<Mandatory>false</Mandatory>
		<BaseObject>false</BaseObject>
	</Object>
</Objects>
